-- test-run result file version 2
netbox = require('net.box')
 | ---
 | ...
test_run = require('test_run').new()
 | ---
 | ...
remote = test_run:get_cfg('remote') == 'true'
 | ---
 | ...
test_run:cmd("setopt delimiter ';'")
 | ---
 | - true
 | ...

nb = nil
if remote then
    box.schema.user.grant('guest','super')
    nb = netbox.connect(box.cfg.listen)
else
    nb = netbox.self
end;
 | ---
 | ...

--
-- netbox:self and netbox:connect should work interchangeably
--
test_run:cmd("setopt delimiter ''");
 | ---
 | - true
 | ...
type(nb:eval('return box.tuple.new{1}')) -- table
 | ---
 | - table
 | ...
type(nb:eval('return box.error.new(1, "test error")')) -- string
 | ---
 | - string
 | ...
type(nb:eval('return box.NULL')) -- cdata
 | ---
 | - cdata
 | ...
